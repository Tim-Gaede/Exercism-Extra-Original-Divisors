using Test

include("divisors.jl")

# Tests adapted from `problem-specifications//canonical-data.json` @ v1.1.0

primes = Int[]

@testset "One" begin
    @test divisors!(1, primes) == [1]
end


@testset "From factorization of Plato's number" begin
    @test divisors([[2, 4], [3, 2], [5, 1], [7, 1]]) == [1, 2, 3, 4, 5, 6, 7, 8,
        9, 10, 12, 14, 15, 16, 18, 20, 21, 24, 28, 30,
        35, 36, 40, 42, 45, 48, 56, 60, 63, 70, 72, 80, 84, 90, 105, 112, 120,
        126, 140, 144, 168, 180, 210, 240, 252, 280, 315, 336, 360, 420, 504,
        560, 630, 720, 840, 1008, 1260, 1680, 2520, 5040]
end

@testset "Product of three cubes of two-digit primes" begin
    @test divisors!(23^3 * 29^3 * 31^3, primes) == [1, 23, 29, 31, 529, 667,
        713, 841, 899, 961, 12167, 15341, 16399, 19343, 20677, 22103, 24389,
        26071, 27869, 29791, 352843, 377177, 444889, 475571, 508369, 560947,
        599633, 640987, 685193, 756059, 808201, 863939, 10232447, 10938133,
        11692487, 12901781, 13791559, 14742701, 15759439, 17389357, 18588623,
        19870597, 23437829, 25054231, 296740963, 317205857, 339082123,
        362467097, 399955211, 427538329, 457023731, 539070067, 576247313,
        726572699, 9198969853, 9833381567, 10511545813, 12398611541,
        13253688199, 16711172077, 285168065443, 304834828577,
        384356957771, 8840210028733]
end




@testset "Negative number" begin
    @test_throws DomainError divisors!(-42, primes)
end



#=
@testset "Some divisors greater than 2^64" begin
    @test divisors([[97, 5], [1_234_567_890_123_481, 1]]) == [1, 97, 9409,
        912673, 88529281, 8587340257, 1234567890123481, 119753085341977657,
        11616049278171832729, 1126756779982667774713, 109295407658318774147161,
        10601654542856921092274617]
end
=#
